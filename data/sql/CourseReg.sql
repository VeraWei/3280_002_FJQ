DROP DATABASE IF EXISTS Registrar;
CREATE DATABASE Registrar;
USE Registrar;

-- create table STUDENTS
CREATE TABLE STUDENTS (
	StudentID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	FName CHAR(20) NOT NULL,
	LName CHAR(20) NOT NULL,
    PhoneNumber Char(18) NOT NULL,
    Email VARCHAR (35) NOT NULL

) Engine=InnoDB AUTO_INCREMENT = 300000000;



CREATE TABLE INSTRUCTORS (
	InstructorID INT(5) NOT NULL AUTO_INCREMENT PRIMARY KEY,
	InstructorName CHAR(35)	NOT NULL,
	Phone CHAR(25) NOT NULL,
	Email VARCHAR(35) NOT NULL
) Engine=InnoDB;

-- create table COURSES
CREATE TABLE COURSES (
	CRN SMALLINT(5) NOT NULL,
	Credits Int(1)	NOT NULL,
	Subject VARCHAR(35)	NOT NULL,
	Title CHAR(150)	NOT NULL,
	InstructorID INT NULL,
    PreReq BIT NOT NULL DEFAULT 0,
	Duration INT NOT NULL,
	Enrl INT(2) NOT NULL,
    Rem INT(2) NOT NULL,
    Wait INT(2) NOT NULL,
	PRIMARY KEY(CRN, Subject),
	FOREIGN KEY (InstructorID) REFERENCES INSTRUCTORS(InstructorID) ON UPDATE CASCADE ON DELETE NO ACTION

) Engine=InnoDB;

CREATE TABLE TUITION (
	StudentID INT NOT NULL,
	AmountOwing INT NULL,
	TuitionPaid BIT NULL,
	PRIMARY KEY (StudentID),
	FOREIGN KEY (StudentID) REFERENCES STUDENTS(StudentID) ON UPDATE CASCADE ON DELETE NO ACTION
) Engine=InnoDB;

CREATE TABLE STUDENTS_COURSES (
	CRN SMALLINT(5) NOT NULL,
	StudentID INT NOT NULL,
	RegistrationDate Date NOT NULL,
	Subject VARCHAR(35)	NOT NULL, 
	PRIMARY KEY(CRN, Subject, StudentID),
	FOREIGN KEY(CRN, Subject) REFERENCES COURSES(CRN, Subject) ON UPDATE CASCADE ON DELETE CASCADE, 
	FOREIGN KEY(StudentID) REFERENCES STUDENTS(StudentID) ON UPDATE CASCADE ON DELETE CASCADE

) Engine=InnoDB;

CREATE TABLE USERS (
	StudentID INT NOT NULL,
	Password VARCHAR(250) NOT NULL,
	PRIMARY KEY (StudentID),
	FOREIGN KEY (StudentID) REFERENCES STUDENTS(StudentID) ON UPDATE CASCADE ON DELETE NO ACTION
) Engine=InnoDB;

INSERT INTO STUDENTS VALUES (NULL, 'Orlando', 'Bloom', '(778)-(888)-(2233)', 'John.Bloom@college.ca');
INSERT INTO STUDENTS VALUES (NULL, 'Sarah', 'Connor', '(604)-(777)-(2244)', 'Sarah.Connor@college.ca');
INSERT INTO STUDENTS VALUES (NULL, 'Bruce', 'Wayne', '(604)-(666)-(2255)', 'Bruce.Wayne@college.ca');
INSERT INTO STUDENTS VALUES (NULL, 'Larah', 'Croft', '(778)-(555)-(2266)', 'Larah.Croft@college.ca');

INSERT INTO INSTRUCTORS VALUES (NULL, 'Bruce Willis', '(778)-(600)-(1120)', 'Bruce.Willis@instructor.ca');
INSERT INTO INSTRUCTORS VALUES (NULL, 'Leon Kepling', '(778)-(600)-(1121)', 'Leon Kepling@instructor.ca');
INSERT INTO INSTRUCTORS VALUES (NULL, 'James Bond', '(778)-(600)-(1122)', 'James.Bond@instructor.ca');
INSERT INTO INSTRUCTORS VALUES (NULL, 'Jennifer Kent', '(778)-(600)-(1123)', 'Jennifer.Kent@instructor.ca');

INSERT INTO COURSES VALUES(1110, 3, 'CSIS', 'Introduction to programming', 1, 0, 45, 2, 23, 0);
INSERT INTO COURSES VALUES(1280, 3, 'CSIS', 'WebScripting 101', 2, 1, 45, 2, 23, 0);
INSERT INTO COURSES VALUES(2200, 3, 'CSIS', 'Database Systems and Design', 3, 0, 45, 0, 25, 0);
INSERT INTO COURSES VALUES(3300, 3, 'CSIS', 'Advanced Database Systems', 4, 1, 45, 0, 25, 0);

INSERT INTO TUITION VALUES(300000000, 300, 0);
INSERT INTO TUITION VALUES(300000001, 200, 0);
INSERT INTO TUITION VALUES(300000002, 100, 0);
INSERT INTO TUITION VALUES(300000003, 0, 1);

INSERT INTO STUDENTS_COURSES VALUES (1110, 300000000, '2020-09-02', 'CSIS');
INSERT INTO STUDENTS_COURSES VALUES (2200, 300000000, '2020-09-02', 'CSIS');
INSERT INTO STUDENTS_COURSES VALUES (1280, 300000001, '2020-09-02', 'CSIS');
INSERT INTO STUDENTS_COURSES VALUES (2200, 300000002, '2020-09-02', 'CSIS');
INSERT INTO STUDENTS_COURSES VALUES (3300, 300000003, '2020-09-02', 'CSIS');

INSERT INTO USERS VALUES(300000000, '$2y$10$NwGIIdtKVMACOpCRTT.w9.ihb30kFu3G.tpnOkH1hkVSccsw/8MA6');
INSERT INTO USERS VALUES(300000001, '$2y$10$jGzuToROEa.xitu1vE4GSOCuSeHEJSzFTvzTqUAavJa/rAQW6l2W2');
INSERT INTO USERS VALUES(300000002, '$2y$10$ixwmmlJCeHNcV9ZoX/s5luIAcjiofNA72M97ukaLRRJiHhKUJzqaW');
INSERT INTO USERS VALUES(300000003, '$2y$10$pyEZE5lAjWRNMUnfS9yNYezhv1hhs/B8OVc7tFMlpefc9qmoLbEju');

-- STOPPED CODING HERE (Joel & Qiuming)